Correções:

Método `total_amount` fazia referencia a uma variável inexistente

Na classe Order o parâmetro `attributes` deixou de ser mutável e passou a ser imutável garantindo que não hajam modificações deste elemento dentro da classe Order