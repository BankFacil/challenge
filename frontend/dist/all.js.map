{"version":3,"sources":["app.js"],"names":["Chat","selector","chat_count","content","message_id","date","Date","time","getHours","getMinutes","id","markup","render","target","increment","document","querySelector","innerHTML","el","scrollTop","scrollHeight","messages","getMessages","key","hasOwnProperty","text","scrollToBottom","value","increaseMessageCount","message","getMessage","getCurrentTime","storeMessage","buildChatBubbles","clear","chat","module","exports"],"mappings":"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","file":"all.js","sourcesContent":["'use strict';\n\nclass Chat {\n\tconstructor(selector) {\n\t\tthis.selector = selector;\n\t\tthis.chat_count = 0;\n\t\tthis.content = [];\n\t\tthis.message_id = 0;\n\t}\n\n\tgetCurrentTime() {\n\t\tconst date = new Date();\n\t\tconst time = `${date.getHours()}h${date.getMinutes() < 10 ? '0' : ''}${date.getMinutes()}`;\n\n\t\treturn time;\n\t}\n\n\tcreate() {\n\t\tlet id = this.chat_count++;\n\n\t\tthis.content[id] = [];\n\t\tthis.content[id]['messages'] = [];\n\n\t\tlet markup = `\n\t\t\t<form class=\"chat-wrapper\" data-chat-wrapper-id=\"${id}\" action=\"javascript:chat.send(${id})\">\n\t\t\t\t<ul class=\"message-list\" data-chat-message-list-id=\"${id}\"></ul>\n\t\t\t\t<div class=\"message-input-container\">\n\t\t\t\t\t<input type=\"text\" class=\"message-input\" placeholder=\"Digite sua mensagem...\" data-chat-input-id=\"${id}\" />\n\t\t\t\t\t<button class=\"send-button\" type=\"submit\"></button>\n\t\t\t\t</div>\n\t\t\t</form>`;\n\n\t\tthis.render(this.selector, markup);\n\t}\n\n\tgetMessages(id) {\n\t\treturn this.content[`${id}`]['messages'];\n\t}\n\n\trender(target, content, increment = true) {\n\t\tincrement\n\t\t? document.querySelector(target).innerHTML += content\n\t\t: document.querySelector(target).innerHTML = content;\n\t}\n\n\tscrollToBottom(id) {\n\t\tconst el = document.querySelector(`ul[data-chat-message-list-id=\"${id}\"]`);\n\t\tel.scrollTop = el.scrollHeight;\n\t}\n\n\tbuildChatBubbles(id) {\n\t\tconst messages = this.getMessages(id);\n\t\tlet markup = ''\n\n\t\tfor (var key in messages) {\n\t\t\tif (messages.hasOwnProperty(key)) {\n\t\t\t\tmarkup += `<li class=\"wrap-message\"><span class=\"element-message\">${messages[key].text}</span></li>`;\n\t\t\t}\n\t\t}\n\n\t\tthis.render(`ul[data-chat-message-list-id=\"${id}\"]`, markup, false)\n\t\tthis.scrollToBottom(id);\n\t}\n\n\tclear(id) {\n\t\tdocument.querySelector(`input[data-chat-input-id=\"${id}\"]`).value = ''\n\t}\n\n\tgetMessage(id) {\n\t\treturn document.querySelector(`input[data-chat-input-id=\"${id}\"]`).value\n\t}\n\n\tincreaseMessageCount() {\n\t\tthis.message_id++;\n\t\treturn this.message_id\n\t}\n\n\tstoreMessage(id) {\n\t\tthis.increaseMessageCount();\n\t\tconst message = this.getMessage(id);\n\n\t\tthis.content[`${id}`]['messages'][`${this.message_id}`] = [];\n\t\tthis.content[`${id}`]['messages'][`${this.message_id}`]['text'] = message;\n\t\tthis.content[`${id}`]['messages'][`${this.message_id}`]['time'] = this.getCurrentTime();\n\n\t\t// In the future, our application would store data in a server.\n\t}\n\n\tsend(id) {\n\t\tthis.storeMessage(id);\n\t\tthis.buildChatBubbles(id);\n\t\tthis.clear(id);\n\n\t\treturn true;\n\t}\n}\n\nlet chat = new Chat('.messages');\nmodule.exports = Chat"]}